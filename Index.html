<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculateur d'amendes</title>
<style>
    body { font-family: Arial, sans-serif; background:#1e1e1e; color:white; padding:20px; }
    h1 { text-align:center; }
    .container { max-width:1100px; margin:auto; background:#2b2b2b; padding:20px; border-radius:10px; }
    label { display:block; font-weight:bold; margin-bottom:5px; }
    input, select { width:100%; padding:10px; border-radius:6px; border:none; background:#1a1a1a; color:white; }
    .grid {display:grid; grid-template-columns: repeat(4, 1fr); gap:15px; margin-top:20px;}
    .item { background:#242424; padding:15px; border-radius:8px; }
    button { margin-top:20px; padding:12px; width:100%; border:none; border-radius:6px; background:#4caf50; color:white; font-size:16px; cursor:pointer; }
    button:hover { background:#45a049; }
    .result { margin-top:25px; padding:15px; background:#333; border-radius:8px; font-size:18px; }
    .info { margin-top:15px; font-size:14px; color:#bbb; background:#2e2e2e; padding:10px; border-radius:6px; }
</style>
</head>
<body>
<div class="container">
<h1>Calculateur d'amendes avancé</h1>

<div class="grid">
    <div class="item"><label>Armes de poing</label><input id="poing_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Armes d'épaule</label><input id="epaule_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Armes de guerre</label><input id="guerre_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Explosifs</label><input id="explosif_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Tentative homicide civil</label><input id="homicide_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Tentative homicide agent</label><input id="homicide_agent_qty" type="number" value="0" min="0"></div>

    <div class="item"><label>Packets de cannabis</label><input id="cannabis_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Packets de cocaïne</label><input id="cocaine_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Poudre de méthamphétamine</label><input id="meth_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Poudre de méth bleue</label><input id="meth_bleue_qty" type="number" value="0" min="0"></div>
    <div class="item"><label>Produits chimiques</label><input id="chimique_qty" type="number" value="0" min="0"></div>

    <div class="item"><label>Bourgeons cannabis</label><input id="canna_bourg" type="number" value="0" min="0"></div>
    <div class="item"><label>Bourgeons cocaïne</label><input id="coke_bourg" type="number" value="0" min="0"></div>
    <div class="item"><label>Seau meth blanche</label><input id="meth_seau" type="number" value="0" min="0"></div>
    <div class="item"><label>Seau meth bleue</label><input id="blue_seau" type="number" value="0" min="0"></div>
</div>

<label style="margin-top:20px;">DEFCON</label>
<select id="defcon">
    <option value="1">DEFCON 1 (×2.0736)</option>
    <option value="2">DEFCON 2 (×1.728)</option>
    <option value="3">DEFCON 3 (×1.44)</option>
    <option value="4">DEFCON 4 (×1.2)</option>
    <option value="5" selected>DEFCON 5 (base)</option>
</select>

<label style="margin-top:15px;">Fuite / Riposte ?</label>
<select id="fuite">
    <option value="non" selected>Non</option>
    <option value="oui">Oui (×1.5)</option>
</select>

<button onclick="calculer()">Calculer</button>
<div class="result" id="result"></div>

<div class="info">
    <strong>Transformations :</strong><br>
    - 1 packet = 5 bourgeons<br>
    - 1 seau meth blanche = 5 poudres<br>
    - 1 seau meth bleue = 4 poudres<br><br>
    <strong>Limites DEFCON appliquées UNE SEULE FOIS au total :</strong><br>
    • DEFCON 5 → total max 2000€<br>
    • DEFCON 4 → total max 4000€<br>
    • DEFCON 3 → total max 8000€<br>
    • DEFCON 2 → total max 25 000€<br>
    • DEFCON 1 → aucune limite
</div>

<script>
const basePrices = {
    poing: 1500,
    epaule: 2500,
    guerre: 4000,
    explosif: 800,
    homicide: 15000,
    homicide_agent: 20000,
    cannabis: 128,
    cocaine: 160,
    meth: 128,
    meth_bleue: 160,
    chimique: 10
};

const defconMultipliers = { 5:1, 4:1.2, 3:1.44, 2:1.728, 1:2.0736 };
const defconCaps = { 5:2000, 4:4000, 3:8000, 2:25000, 1:Infinity };

function calculer() {
    let def = document.getElementById('defcon').value;
    let fuite = document.getElementById('fuite').value;
    let fuiteMult = fuite === "oui" ? 1.5 : 1;

    let total = 0;

    let cannaPackets = parseInt(document.getElementById('cannabis_qty').value) || 0;
    let cokePackets = parseInt(document.getElementById('cocaine_qty').value) || 0;

    let cannaBourg = parseInt(document.getElementById('canna_bourg').value) || 0;
    let cokeBourg = parseInt(document.getElementById('coke_bourg').value) || 0;

    cannaPackets += cannaBourg / 5;
    cokePackets += cokeBourg / 5;

    let methPowder = parseInt(document.getElementById('meth_qty').value) || 0;
    let bluePowder = parseInt(document.getElementById('meth_bleue_qty').value) || 0;

    let methSeau = parseInt(document.getElementById('meth_seau').value) || 0;
    let blueSeau = parseInt(document.getElementById('blue_seau').value) || 0;

    methPowder += methSeau * 5;
    bluePowder += blueSeau * 4;

    const computed = {
        cannabis: cannaPackets,
        cocaine: cokePackets,
        meth: methPowder,
        meth_bleue: bluePowder
    };

    for (let key in basePrices) {
        let element = document.getElementById(key + '_qty');
        let qty = 0;

        if (computed[key] !== undefined) qty = computed[key];
        else if (element) qty = parseInt(element.value) || 0;

        let valeur = qty * basePrices[key] * defconMultipliers[def] * fuiteMult;
        total += valeur;
    }

    total = Math.min(total, defconCaps[def]);

    document.getElementById('result').innerHTML = `Total des amendes : <strong>${total.toFixed(2)}€</strong>`;
}
</script>
</body>
</html>